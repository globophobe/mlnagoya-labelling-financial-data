import { Layout, Image, Appear, Fit, Fill, Heading, Link, Table, TableHeader, TableHeaderItem, TableBody, TableRow, TableItem } from 'spectacle';
import { DarkSlide, CodeSlide } from './slides';
import arex from '../assets/arex.jpg';
import cover from '../assets/cover.jpg';
import coverJapanese from '../assets/cover-japanese.jpg';
import marcos from '../assets/marcos.jpg';
import bitcoin from '../assets/bitcoin.png';
import fixedHorizon from '../assets/fixed-horizon.png';
import tripleBarrier from '../assets/triple-barrier.png';
import cusum from '../assets/cusum.png';
import volatility from '../assets/volatility.png';
import buySide from '../assets/buy-side.png';
import sellSide from '../assets/sell-side.png';
import tripleBarrierBinary from '../assets/triple-barrier-binary.png';

<Heading style={{ marginBottom: 0 }}>
  Labelling Financial Data
  <br />
  <span style={{ fontSize: "8.5vmin" }}>
    è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã®ãƒ©ãƒ™ãƒ«ä»˜ã‘
  </span>
</Heading> 
<Appear>
  <Heading size={2} style={{ color: "#737373" }}>
    with bonus Amazon Forecast.
  </Heading> 
</Appear>

---

# These slides are at Connpass. So you can check them out.
## ã‚¹ãƒ©ã‚¤ãƒ‰ã¯Connpassã«ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã™ã€‚ æ˜¯éã¿ã¦ãã ã•ã„ã€‚

---

# Who am I?
## ãŠå‰èª°?

---

# My name is Alex, and I'm from Canada ğŸ‡¨ğŸ‡¦
## ã‚¢ãƒ¬ãƒƒã‚¯ã‚¹ã§ã€ã‚«ãƒŠãƒ€ã‹ã‚‰æ¥ã¾ã—ãŸã€‚

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading>My username on Connpass is "globophobe".</Heading>
    <Heading size={4}>Connpassã®ãƒ¦ãƒ¼ã‚¶åã¯ã€Œglobophobeã€ã§ã™ã€‚</Heading>
  </Fill>
  <Fill>
    <Image style={{ borderRadius: "35px", marginLeft: "35px" }} src={arex} />
  </Fill>
</Layout>

---

# I make stuff with Python, Django, Vue.js and React Native. 
## Pythonã‚„Djangoã‚„Vue.jsã‚„React Nativeã§ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã—ã¦ã„ã¾ã™ã€‚

---

# This is just for fun.
## ã“ã‚Œã¯ãŸã ã®æ¥½ã—ã¿ã§ã™ã€‚

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading>Recently, I have been reading this book.</Heading>
    <Heading size={2}>
      æœ€è¿‘ã“ã®æœ¬ã‚’èª­ã‚“ã§ã„ã¾ã™ã€‚
    </Heading>
  </Fill>
  <Fill>
      <Link href="https://www.amazon.co.jp/Advances-Financial-Machine-Learning-Marcos/dp/1119482089/">
      <Image style={{ height: "96vh", borderRadius: "10px", marginLeft: "auto", marginRight: "auto" }} src={cover} />
    </Link>
  </Fill>
</Layout>

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading>Currently, it is published in Japanese.</Heading>
    <Heading size={2}>ç¾åœ¨æ—¥æœ¬èªã§å‡ºç‰ˆã•ã‚Œã¦ã„ã¾ã™ã€‚</Heading>
  </Fill>
  <Fill>
      <Link href="https://www.amazon.co.jp/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%8A%E3%83%B3%E3%82%B9%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92-%E3%83%9E%E3%83%AB%E3%82%B3%E3%82%B9%E3%83%BB%E3%83%AD%E3%83%9A%E3%82%B9%E3%83%BB%E3%83%87%E3%83%BB%E3%83%97%E3%83%A9%E3%83%89/dp/4322134637/">
      <Image style={{ height: "96vh", borderRadius: "10px", marginLeft: "auto", marginRight: "auto" }} src={coverJapanese} />
    </Link>
  </Fill>
</Layout>

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading size={4}>
      The author Marcos Lopez de Prado was named <Link href="https://jpm.pm-research.com/quant-of-2019">Quant of 2019</Link> by the <Link href="https://jpm.pm-research.com/">Journal of Portfolio Management</Link>
    </Heading>
    <Heading size={5}>è‘—è€…ã¯ã€JPMã«ã‚ˆã‚Šã€Œã‚¯ã‚©ãƒ³ãƒˆ ã‚ªãƒ– ã‚¶ ã‚¤ãƒ¤ãƒ¼ã€ã«é¸ã°ã‚Œã¾ã—ãŸã€‚</Heading>
  </Fill>
  <Fill>
    <Image style={{ height: "80vh", borderRadius: "35px", marginLeft: "35px" }} src={marcos} />
  </Fill>
</Layout>

---

# According to the author, "One day in the near future, ML will dominate finance...
## è‘—è€…ã«ã‚ˆã‚‹ã¨ã€ã€Œè¿‘ã„å°†æ¥ã€MLãŒé‡‘èã‚’æ”¯é…ã—ã¦...

---

# ...science will curtail guessing, and investing will not mean gambling."
## ç§‘å­¦ã¯æ¨æ¸¬ã‚’å‰Šæ¸›ã—ã€ãã—ã¦ãã®è¿‘ãå°†æ¥ã«ã¯ã€æŠ•è³‡ã‚’ã™ã‚‹äº‹ã¯ã‚‚ã†ã‚®ãƒ£ãƒ³ãƒ–ãƒ«ã®æ„å‘³ã‚‚ã—ã¾ã›ã‚“ã€‚ã€

---

# In Chapter 2, volume clock sampling was discussed.
## ç¬¬2ç« ã§ã¯è²¡å‹™ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã¤ã„ã¦

---

# In a <Link href="https://twitter.com/JacquesQuant/status/1210309445202436100">question</Link> on Twitter, a lead developer of the <Link href="https://github.com/hudson-and-thames/mlfinlab">MLFinLab</Link> package...

---

# ...which implements Lopez de Prado's research... 

---

# ...asks about the importance of volume clock sampling.

---

# Lopez de Prado answered, "I would use volume clock whenever possible...

---

# ...even if the analysis also appears to work with chronological time."

---

# Unfortunately, raw transaction data is necessary for volume clock sampling.
## ç”Ÿã®å–å¼•ãƒ‡ãƒ¼ã‚¿ã¯ã€ãƒ†ã‚£ãƒƒã‚¯ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã€ã¾ãŸã¯ãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã®ãƒãƒ¼ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚

---

# Usually, such data is very expensive.
## é€šå¸¸ã€ãã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿ã¯éå¸¸ã«é«˜ä¾¡ã§ã™ã€‚

---

<Layout>
  <Fill style={{ margin: "auto" }}>
    <Heading>
      However, it is provided free by some Bitcoin exchanges.
    </Heading>
    <Heading size={3}>
      ã—ã‹ã—ã€ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³ã®å–å¼•æ‰€ã§ã¯ç„¡æ–™ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚
    </Heading>
  </Fill>
  <Fill>
    <Image style={{ borderRadius: "35px", marginTop: "50%", marginBottom: "50%", marginLeft: "35px" }} src={bitcoin} />
  </Fill>
</Layout>

---

# My preference is data for the Bitmex XBTUSD perpetual future contract.
## ç§ã¯Bitmexã®XBTUSDã®æ°¸ç¶šçš„ãªå…ˆç‰©å¥‘ç´„ã®ãƒ‡ãƒ¼ã‚¿ã«ã—ã¾ã—ãŸã€‚

---

# In Chapter 3, labelling financial data is discussed.
## ç¬¬3ç« ã§ã¯è²¡å‹™ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã¤ã„ã¦

---

# Most quantitative methods use fixed time horizon labeling methods.
## ã»ã¨ã‚“ã©ã®å®šé‡çš„æ–¹æ³•ã¯ã€å›ºå®šæ™‚é–“ç¯„å›²ãƒ©ãƒ™ãƒ«ä»˜ã‘æ–¹æ³•ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ 

---

# The label is determined when price touches the vertical barrier.
## ãƒ©ãƒ™ãƒ«ã¯ã€ä¾¡æ ¼ãŒå‚ç›´éšœå£ã«ã‚¿ãƒƒãƒã™ã‚‹ã¨æ±ºå®šã•ã‚Œã¾ã™ã€‚

---

<Image style={{ height: "80vh" }} src={fixedHorizon} />

---

# Lopez de Prado identifies two problems with such labels.
# ãã®ã‚ˆã†ãªãƒ©ãƒ™ãƒ«ã«é–¢ã™ã‚‹2ã¤ã®å•é¡Œã‚ã‚Šã¾ã™ã€‚
---

# 1) Time-horizon is fixed, but volatility is not.
## æœŸé–“ãŒå›ºå®šã•ã‚Œã¦ã„ã¾ã™ãŒã€ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã¯å›ºå®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

---

# 2) The realities of trading require both stop loss and take profit thresholds.
## å–å¼•ã®ç¾å®Ÿã«ã¯ã€ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã¨åˆ©ç›Šã®é–¾å€¤ã®ä¸¡æ–¹ãŒå¿…è¦ã§ã™ã€‚

---

# Lopez de Prado describes a "triple-barrier" labelling method.
## Lopez de Pradoã¯ã€Œãƒˆãƒªãƒ—ãƒ«ãƒãƒªã‚¢ã€ãƒ©ãƒ™ãƒ«ä»˜ã‘ã¦è¨€ã†äº‹ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

---

<Image style={{ height: "80vh" }} src={tripleBarrier} />

---

# The vertical barrier is the same as fixed-horizon labelling.
## æ°´å¹³ãƒãƒªã‚¢ã¯ã€å›ºå®šæ°´å¹³ãƒ©ãƒ™ãƒ«ä»˜ã‘ã¨åŒã˜ã§ã™ã€‚

---

# The upper and lower barriers are take profit or stop loss thresholds.
## ä¸Šé™ã¨ä¸‹é™ã®éšœå£ã¯ã€åˆ©æ½¤ã¾ãŸã¯ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã®ã—ãã„å€¤ã§ã™ã€‚

---

# Lopez de Prado recommends calculating the upper and lower barriers with a point estimation of volatility... 
## ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ãƒã‚¤ãƒ³ãƒˆæ¨å®šã‚’è¨ˆç®—ã—ã¦ã€ãã—ã¦ãã®ãƒã‚¤ãƒ³ãƒˆæ¨å®šã‚’ä½¿ã£ã¦ä¸Šãƒãƒªã‚¢ã¨ä¸‹ãƒãƒªã‚¢ã®éšœå£ã‚’è¨ˆç®—ã™ã‚‹äº‹ãŒå‹§ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

---

# ...which is the mean of the exponentially weighted moving standard deviation of returns.
## ...ãã®ãƒã‚¤ãƒ³ãƒˆæ¨å®šã¯ãƒªã‚¿ãƒ¼ãƒ³ã®æŒ‡æ•°åŠ é‡ç§»å‹•æ¨™æº–åå·®ã®å¹³å‡ã§ã™ã€‚

---

# Returns being defined as the percent change in price between time T and T - 1.
## æˆ»ã‚Šå€¤ã¯æ™‚é–“Tã¨T-1ã®é–“ã®ä¾¡æ ¼ã®å¤‰åŒ–ç‡ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

# As per the following function:
## æ¬¡ã®é–¢æ•°ã§è¨ˆç®—ã—ã¾ã™ï¼š

---

export default CodeSlide

```python
def get_volatility(prices, span=100, delta=pd.Timedelta(hours=24)):
    df = prices.index.searchsorted(prices.index - delta)
    df = df[df > 0]
    df = pd.Series(prices.index[df - 1], 
                   index=prices.index[prices.shape[0]-df.shape[0]:])
    df = prices.loc[df.index] / prices.loc[df.values].values - 1
    df = df.ewm(span=span).std()
    return df
}
```

---

#### The exponentially weighted moving standard deviation of returns:
#### ãƒªã‚¿ãƒ¼ãƒ³ã®æŒ‡æ•°åŠ é‡ç§»å‹•æ¨™æº–åå·®ï¼š

<Image style={{ height: "65vmin" }} src={volatility} />

---

# The mean of which becomes the threshold for the following function:
## ãã®å¹³å‡ãŒæ¬¡ã®é–¢æ•°ã®ã—ãã„å€¤ã«ãªã‚Šã¾ã™ã€‚

---

export default CodeSlide

```python
def cusum_filter(prices, threshold):
    events, pos, neg = [], 0, 0
    diff = prices.diff()
    for idx in diff.index[1:]:
        pos = max(0, pos + diff.loc[idx])
        neg = min(0, neg + diff.loc[idx])
        if neg < -threshold:
            neg = 0; events.append(idx)
        elif pos > threshold:
            pos = 0; events.append(idx)
    return pd.DatetimeIndex(events)
```

---

# The *cusum_filter* reduces the price series to only data points greater or less than the threshold.
## *cusum_filter* ã¯ã€ä¾¡æ ¼ç³»åˆ—ã‚’ã—ãã„å€¤ã‚ˆã‚Šã‚‚å¤§ãã„ã¾ãŸã¯å°ã•ã„ãƒã‚¤ãƒ³ãƒˆã®ã¿ã«æ¸›ã‚‰ã—ã¾ã™ã€‚

---

# An example of the *cusum_filter* :
## *cusum_filter* ã®ä¾‹ï¼š

<Image style={{ height: "60vh" }} src={cusum} />

---

# The *cusum_filter* is described as an "[improvement] over popular market signals such as Bollinger bands. More on this later.
## * cusum_filter *ã¯äººæ°—ã®ã‚ã‚‹å¸‚å ´ä¿¡å·ã€Œãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã€ã¨ã‹ã«å¯¾ã™ã‚‹[æ”¹å–„]ã¨ã—ã¦èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œã§è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚
---

# The time of the first touch, to either upper, lower, or vertical barrier is calculated. 
## ä¸Šéƒ¨ã€ä¸‹éƒ¨ã€ã¾ãŸã¯å‚ç›´ãƒãƒªã‚¢ã¸ã®æœ€åˆã®ã‚¿ãƒƒãƒã®æ™‚é–“ãŒè¨ˆç®—ã•ã‚Œã¾ã™ã€‚

---

## These are some "triple-barrier" touches.
<Heading size={2} style={{ marginBottom: "0.5em" }}>ã€Œãƒˆãƒªãƒ—ãƒ«ãƒãƒªã‚¢ã€ã‚¿ãƒƒãƒã§ã™ã€‚</Heading>

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>touch</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2017-03-22 13:58:33.411609</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>0.0662078</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>2017-03-23 14:14:25.540570</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2017-07-21 02:25:36.397497</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>0.0168957</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>2017-07-21 03:04:44.531031</TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "4.5vmin" }}>2018-12-17 12:12:43.155227</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>0.0141053</TableItem>
      <TableItem style={{ fontSize: "4.5vmin" }}>2018-12-17 12:12:57.062203</TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## The touches are indexed with the original dataframe to become labels.
## ã‚¿ãƒƒãƒã¯å…ƒã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä»˜ã‘ã•ã‚Œã€ãƒ©ãƒ™ãƒ«ã«ãªã‚Šã¾ã™ã€‚

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2017-03-22 13:58:33.411609</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.066208</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.019608</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>0</strong></TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2017-07-21 02:25:36.397497</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.016896</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>-0.018248</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>-1</strong></TableItem>
    </TableRow>
    <TableRow>
      <TableItem style={{ fontSize: "5vmin" }}>2018-12-17 12:12:43.155227</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.014105</TableItem>
      <TableItem style={{ fontSize: "5vmin" }}>0.015244</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>1</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## *Label 0* return was less than target when the vertical barrier, the max-holding period, was touched.
## *ãƒ©ãƒ™ãƒ« 0 * æœ€å¤§ä¿æœ‰æœŸé–“ã§ã‚ã‚‹å‚ç›´éšœå£ã«è§¦ã‚ŒãŸã¨ãã®ãƒªã‚¿ãƒ¼ãƒ³ã¯ç›®æ¨™ã‚’ä¸‹å›ã£ã¦ã„ã¾ã—ãŸã€‚

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "5.5vmin" }}>2017-03-22 13:58:33.411609</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.066208</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.019608</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>0</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## *Label -1* return was negative when the lower barrier, stop-loss, was touched.
## *ãƒ©ãƒ™ãƒ« -1 * ä¸‹ã®éšœå£ã§ã‚ã‚‹ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ã«è§¦ã‚ŒãŸæ™‚ã®ãƒªã‚¿ãƒ¼ãƒ³ã¯è² ã§ã—ãŸã€‚

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "5.5vmin" }}>2017-07-21 02:25:36.397497</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.016896</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>-0.018248</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>-1</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

## *Label 1* return was greater than target when the upper barrier, take-profit, was touched.
## *ãƒ©ãƒ™ãƒ« 1 * åˆ©ç›ŠãŒä¸Šä½éšœå£ã§ã‚ã‚‹ãƒ†ã‚¤ã‚¯ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆã«è§¦ã‚ŒãŸã¨ãã®ãƒªã‚¿ãƒ¼ãƒ³ã¯ç›®æ¨™ã‚’ä¸Šå›ã‚Šã¾ã—ãŸã€‚

<Table>
  <TableHeader>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>timestamp</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>target</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>return</TableHeaderItem>
    <TableHeaderItem style={{ fontSize: "6vmin" }}>label</TableHeaderItem>
  </TableHeader>
  <TableBody>
    <TableRow>
      <TableItem style={{ fontSize: "5.5vmin" }}>2018-12-17 12:12:43.155227</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.014105</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}>0.015244</TableItem>
      <TableItem style={{ fontSize: "5.5vmin" }}><strong>1</strong></TableItem>
    </TableRow>
  </TableBody>
</Table>

---

# Labels of either 1 or -1 indicate a trading opportunity.
1ã¾ãŸã¯-1ã®ãƒ©ãƒ™ãƒ«ã¯ã€å–å¼•ã®æ©Ÿä¼šã‚’ç¤ºã—ã¾ã™ã€‚

---

# *Label 1*, buy low and sell high.
## *ãƒ©ãƒ™ãƒ« 1*ã€å®‰å€¤ã§è³¼å…¥ã€é«˜å€¤ã§è²©å£²ã€‚

<Image style={{ height: "60vh" }} src={buySide} />

---

# *Label -1*, sell high and buy low.
## *ãƒ©ãƒ™ãƒ« -1*ã€é«˜å€¤ã§å£²ã‚Šã€ä½å€¤ã§è²·ã„ã¾ã™ã€‚

<Image style={{ height: "60vh" }} src={sellSide} />

---

# *Label -1*, implies margin trading. Selling that which you do not have.
## *ãƒ©ãƒ™ãƒ« -1*ã€è¨¼æ‹ é‡‘å–å¼•ã‚’æ„å‘³ã—ã¾ã™ã€‚ æŒã£ã¦ã„ãªã„ã‚‚ã®ã‚’å£²ã‚‹ã€‚

---

# Example, using Â¥100,000 as margin (collateral) to sell Â¥1,000,000.
## ãŸã¨ãˆã°ã€100,000å††ã‚’ãƒãƒ¼ã‚¸ãƒ³ï¼ˆæ‹…ä¿ï¼‰ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã€1,000,000å††ã‚’è²©å£²ã—ã¾ã™ã€‚

---

# *Label 0*, suggests not enough volatility for trading to be worthwhile.
## *ãƒ©ãƒ™ãƒ« 0*ã€ å–å¼•ã«å€¤ã™ã‚‹ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ãŒååˆ†ã§ãªã„äº‹ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

---

# Lopez de Prado also describes "meta-labelling".
## ã€Œãƒ¡ã‚¿ãƒ©ãƒ™ãƒ«ã€ã¦è¨€ã†äº‹ã¯ã‚‚èª¬æ˜ã—ã‚Œã¦ã„ã¾ã™ã€‚

---

# Basically, the outcomes of the primary model become input for a secondary model.
## åŸºæœ¬çš„ã«ã€ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¢ãƒ‡ãƒ«ã®çµæœã¯ã€ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¢ãƒ‡ãƒ«ã®å…¥åŠ›ã«ãªã‚Šã¾ã™ã€‚

---

# The secondary model learns position size only, not whether to trade or not.
## ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¢ãƒ‡ãƒ«ã¯ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºã®ã¿ã‚’å­¦ç¿’ã—ã€å–å¼•ã™ã‚‹ã‹ã©ã†ã‹ã¯å­¦ç¿’ã—ã¾ã›ã‚“ã€‚ 

---

# Lopez de Prado suggests "meta-labelling" can be particulary useful...
## ã€Œãƒ¡ã‚¿ãƒ©ãƒ™ãƒ«ã€ãŒç‰¹ã«æœ‰ç”¨ã®ã¯...

---

# ...when outcomes are asymmetric, because it can help avoid large drawdowns (losses).
## ...çµæœã¯éå¯¾ç§°æ™‚ã§ã™ã€‚å¤§ãã„ãªæå¤±ã‚’å›é¿ã™ã‚‹äº‹ã‚’åŠ©ã‘ã‚‹ã‚“ã‹ã‚‰ã§ã™ã€‚

---

# The primary model should have high recall, more true positives, and as few false positives as possible. 
## ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¢ãƒ‡ãƒ«ã¯ã€é«˜ã„å†ç¾ç‡ã—ã¹ãã§ã€å¤šãã®çœŸã®é™½æ€§ã‚ˆã†ã§ã€å‡ºæ¥ã‚‹ã ã‘èª¤æ¤œçŸ¥ãŒã™ããªã„ã‚ˆã†ã§ã™ã€‚

---

# The secondary model filters the false positives from the primary model.
## ã‚»ã‚«ãƒ³ãƒ€ãƒªãƒ¢ãƒ‡ãƒ«ã¯ã€ãƒ—ãƒ©ã‚¤ãƒãƒªãƒ¢ãƒ‡ãƒ«ã‹ã‚‰ã®èª¤æ¤œå‡ºã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

---

# In a recent <Link href="https://time.com/5751190/investing-machine-learning-marcos-de-lopez-prado/">article in Time magazine</Link>, Lopez de Prado states...

---

# ...ML should be used as a research tool, and not as a forecasting tool.

---

# This precludes using Amazon Forecast.
##

---

# However, let's try anyway.
##

---

# Thatâ€™s all. Thanks for listening.
## ä»¥ä¸Šã§ã™ã€‚ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚
